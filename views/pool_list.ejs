<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Landing Page - Start Bootstrap Theme</title>

    <!-- Bootstrap core CSS -->
    <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom fonts for this template -->
    <link href="../assets/vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
    <link href="../assets/vendor/simple-line-icons/css/simple-line-icons.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet"
        type="text/css">
    <!-- Custom styles for this template -->
    <link href="../assets/css/landing-page.min.css" rel="stylesheet">
     <!-- jQuery pluginfor pagination -->
     <script src="http://code.jquery.com/jquery-latest.min.js "></script>
     <script type="text/javascript" src="../assets/js/jquery.twbsPagination.js"></script>
     <!-- CDN for fontAwesome -->
     <script src="https://kit.fontawesome.com/a371979621.js" crossorigin="anonymous"></script>
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-light bg-light static-top">
        <div class="container">
              <a class="navbar-brand" href="/"><img src="../assets/img/logo-youngsu.png"></a>
            <a class="btn btn-primary" href="#">Sign In</a>
        </div>
    </nav>
    <!-- Search console -->
    <div class="container">
        <form action="/pools/search" method="get">
            검색: <input name='searchWord' type='text'>
            <!-- 필터 <select -->
            <input type='submit' value='검색'>
        </form>
    </div>
    <!--List presenting-->
    <div class="container">
        <!-- Page Heading -->
        <h1 class="my-4">수영장 검색결과
            <small>(검색어:<%=result.filters.searchWord%>)</small>
        </h1>
        <%function dec2bin(dec){return (dec >>> 0).toString(2);} %>
        <hr>
        <!--Contentent -->
        <%
        var pools=result.pools;
        for(var poolInfo of pools){
        %>
        <div class="row">
            <div class="col-md-7">
                <a href="#">
                    <img class="img-fluid rounded mb-3 mb-md-0" src="http://placehold.it/700x300" alt="">
                </a>
            </div>
            <div class="col-md-5">
                <div class="row mb-1">
                    <!-- For checking poolOptions -->
                    <h3><%=poolInfo.poolName%>
                        <%var Options=poolInfo.poolOption.toString();%>
                        <%if(Options[0]==1){%><i class="fas fa-child text-warning"></i><%}%>
                   <%if(Options[1]==1){%><i class="fas fa-female text-danger"></i><%}%>
                   <%if(Options[2]==1){%><i class="fab fa-accessible-icon text-success"></i><%}%>
                    </h3>
                </div>
                <!-- For checking poolType : public / private / hotel / indoor / outdoor  -->
                <div class="row mb-3">
                <%var poolType=dec2bin(poolInfo.poolTypeMask);
                var poolTypeText=["공공수영장/","사설수영장/","호텔수영장/","실내 ","야외 "];
                for(var i=0; i<5; i++){
                    if(poolType[i]==1) {%>
                        <%=poolTypeText[i]%>
                        <%}
                }
                %>
                </div>
                <!-- For checking poolOpentime -->
                <%if(poolInfo.poolOpentime==1){%>
                <div class="row mb-3">
                    <i class="fas fa-swimming-pool fa-2x text-info"></i>
                </div>
                <%}else{%>
                <div class="row mb-3">
                    <i class="fas fa-swimming-pool fa-2x text-secondary"></i>
                </div>
                <%}%>
                <!--Other info-->
                <div class="row mb-2"><%=poolInfo.poolAddress%>
            </div>
            <div class="row mb-3"><%=poolInfo.poolPhone%></div>
            <a class="btn btn-primary" href="/pools/detail?poolId=<%=poolInfo.poolId%>">수영장 상세보기</a>
        </div>
    </div>
    <hr>
    <%}%>

        <!-- For pagination -->
        <ul id="pagenation" class="pagination justify-content-center"></ul>
        <script>
<<<<<<< HEAD
            var visiblePages = 10;
            var visibleList=10;

=======
            // var visiblePages = 10;
            var visiblePages = 4;
            var countList = <%=pools.length%>;
>>>>>>> 7fe85399b33dce818266430eb29c7e69f2479ef1
            var totalCount = <%=result.totalCount%>;

<<<<<<< HEAD
            var totalPages = totalCount / visibleList;
            if (totalCount % visibleList > 0)  totalPages++;
            if (totalPages < visiblePages) visiblePages = totalPages;

            var pageNow=parseInt(<%=result.filters.pageNumber%>);

            $('#pagenation').twbsPagination({
                startPage: this.pageNow, //need for change later
                totalPages: this.totalPages,
                visiblePages: this.visiblePages, 
                prev: "이전",
                next: "다음",
                first: '«',
                last: '»',
                onPageClick: function (event, page) {
                    if(page!=parseInt(<%=result.filters.pageNumber%>)){
                    location.href=(
                            "/pools/search?searchWord=<%=result.filters.searchWord %>"
                            +"&poolPublic=<%=result.filters.poolPublic %>"
                            +"&poolPrivate=<%=result.filters.poolPrivate %>"
                            +"&poolHotel=<%=result.filters.poolHotel %>"
                            +"&poolIndoor=<%=result.filters.poolIndoor %>"
                            +"&poolOutdoor=<%=result.filters.poolOutdoor %>"
                            +"&poolOpentime=<%=result.filters.poolOpentime %>"
                            +"&poolForChild=<%=result.filters.poolForChild %>"
                            +"&poolForWoman=<%=result.filters.poolForWoman %>"
                            +"&poolForDisabled=<%=result.filters.poolForDisabled %>"
                            +"&pageNumber="+String(page));
                    }
                }
            });
        </script>
    </div>

    <!-- 검색결과 검색창 필터창 정렬창 -->
    <!-- 컴퓨터 버전에서는 검색창이 옆에 그밑에 필터창 //검색어와 지도 그밑에  정렬기준
        그 밑에 검색결과-->
    <!-- 모바일 버전에서는 검색창안에 정렬, 필터, 지도가 따로 들어감 -->

    <!-- For link to add pool  -->
    <section class=" call-to-action text-white text-center">
        <div class="overlay"></div>
        <div class="container">
            <div class="row">
                <div class="col-xl-9 mx-auto">
                    <h2 class="mb-4">수영장 정보를 추가하고 싶으세요? </h2>
                </div>
                <div class="col-md-10 col-lg-8 col-xl-7 mx-auto">
                    <div class="col-12">
                        <button class="btn btn-block btn-lg btn-primary" href='/pool_input.html'>정보 추가 요청하기!</button>
                    </div>
                </div>
            </div>
        </div>
        </section>

        <!-- Footer -->
        <footer class="footer bg-light">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6 h-100 text-center text-lg-left my-auto">
                        <ul class="list-inline mb-2">
                            <li class="list-inline-item">
                                <a href="#">About</a>
                            </li>
                            <li class="list-inline-item">&sdot;</li>
                            <li class="list-inline-item">
                                <a href="#">Contact</a>
                            </li>
                            <li class="list-inline-item">&sdot;</li>
                            <li class="list-inline-item">
                                <a href="#">Terms of Use</a>
                            </li>
                            <li class="list-inline-item">&sdot;</li>
                            <li class="list-inline-item">
                                <a href="#">Privacy Policy</a>
                            </li>
                        </ul>
                        <p class="text-muted small mb-4 mb-lg-0">&copy; Your Website 2020. All Rights Reserved.</p>
                    </div>
                    <div class="col-lg-6 h-100 text-center text-lg-right my-auto">
                        <ul class="list-inline mb-0">
                            <li class="list-inline-item mr-3">
                                <a href="#">
                                    <i class="fab fa-facebook fa-2x fa-fw"></i>
                                </a>
                            </li>
                            <li class="list-inline-item mr-3">
                                <a href="#">
                                    <i class="fab fa-twitter-square fa-2x fa-fw"></i>
                                </a>
                            </li>
                            <li class="list-inline-item">
                                <a href="#">
                                    <i class="fab fa-instagram fa-2x fa-fw"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>

        <!-- Bootstrap core JavaScript -->
        <script src="../assets/vendor/jquery/jquery.min.js"></script>
        <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

</body>


</html>